<h2 class="header2 title" *ngIf="title !== ''">{{ title }}</h2>
<div markdown class="description"  *ngIf="description !== ''" [data]="description"></div>

<ng-container *ngIf="groupBy; else withoutGroup;">
  <div *ngFor="let group of profilesByGroup | keyvalue;">
    <h4>{{group.key}}</h4>
    <ng-container *ngTemplateOutlet="profilesTemplate; context: {'profiles': group.value}">
    </ng-container>
  </div>
</ng-container>

<ng-template #withoutGroup>
  <ng-container *ngTemplateOutlet="profilesTemplate; context: {'profiles': profiles}">
  </ng-container>
</ng-template>

<ng-template #profilesTemplate let-profiles="profiles">
  <div class="profile-container">
    <div class="profile" *ngFor="let profile of profiles">
      <img class="profile-image" [src]="profile.image" [alt]="profile.image">
      <div class="profile-about">
        <div class="profile-name">{{ profile.name }}</div>
        <div class="profile-title">{{ profile.title }}</div>
        <div class="profile-affiliation" *ngIf="compact === true">{{ profile.affiliation }}</div>
        <div class="profile-body" *ngIf="compact === false" >
          <div markdown [data]="profile.body">
          </div>
        </div>
      </div>
    </div>
  </div>  
</ng-template>
