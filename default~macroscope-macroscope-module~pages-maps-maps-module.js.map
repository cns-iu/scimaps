{"version":3,"sources":["./src/app/shared/components/item-drawer/item-drawer.component.ts","./src/app/shared/components/item-drawer/item-drawer.component.html","./src/app/shared/components/item-drawer/item-drawer.module.ts"],"names":[],"mappings":"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","file":"default~macroscope-macroscope-module~pages-maps-maps-module.js","sourcesContent":["import { Component, EventEmitter, HostBinding, Input, OnInit, Output } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Params, Router } from '@angular/router';\nimport { Store } from '@ngxs/store';\nimport { drawerInOut } from '../../../constants/drawer.animations';\nimport { SetAppState } from '../../../core/actions/app.actions';\nimport { MapMacroscopeItem } from '../../../core/models/discover-item';\nimport { PurchaseModalComponent } from '../purchase-modal/purchase-modal.component';\n\n/**\n * Drawer that opens when a map or macroscope item is selected\n */\n@Component({\n  selector: 'sci-item-drawer',\n  templateUrl: './item-drawer.component.html',\n  styleUrls: ['./item-drawer.component.scss'],\n  animations: [drawerInOut]\n})\nexport class ItemDrawerComponent implements OnInit {\n  /** HTML class name */\n  @HostBinding('class') readonly clsName = 'sci-item-drawer';\n\n  /**\n   * Type of item displayed\n   */\n  @Input() type!: 'map' | 'macroscope';\n\n  /**\n   * Item to be displayed in the drawer\n   */\n  @Input() item!: MapMacroscopeItem;\n\n  /**\n   * Emits the selected language when the language changes\n   */\n  @Output() languageChange = new EventEmitter<string>();\n\n  /**\n   * Currently selected language\n   */\n  selectedLanguage = 'en';\n  showDrawer = false;\n\n  constructor(private dialog: MatDialog, private router: Router, private store: Store) { }\n  ngOnInit(): void {\n    this.showDrawer = true;\n  }\n\n  /**\n   * Combines the maker names\n   */\n  get makers(): string {\n    return this.item.makers.map(maker => maker.name).join(', ');\n  }\n\n  /**\n   * Closes item drawer component and returns to the maps or macroscopes page\n   */\n  close(): void {\n    this.showDrawer = false;\n    setTimeout(() => {\n      this.router.navigate(['/', this.type + 's']);\n    }, 500);\n  }\n\n  /**\n   * Sets selectedLanguage to selected language and emits the new language\n   * @param language The language selected\n   */\n  languageSelect(language: string): void {\n    this.selectedLanguage = language;\n    this.languageChange.emit(language);\n  }\n\n  /**\n   * Opens purchase modal\n   */\n  openPurchase(): void {\n    this.dialog.open(PurchaseModalComponent, {\n      width: window.innerWidth <= 768 ? '100%' : '738px'\n    });\n  }\n\n  openDrawer(item: Params): void {\n    this.store.dispatch(new SetAppState({drawer: {\n      showDrawer: true,\n      drawerName: 'makers-drawer',\n      drawerPayload: item\n    }}));\n  }\n\n  redirect(link: string): void {\n    if (link) {\n      window.open(link, '_blank');\n    }\n  }\n}\n","<sci-drawer [@drawerInOut]=\"showDrawer ? 'show' : 'hide'\">\n  <div class=\"details-container\" drawer>\n    \n    <div class=\"header\">\n      <sci-drawer-header (backClick)=\"close()\">\n      </sci-drawer-header>\n      <div class=\"purchase-button\" *ngIf=\"type === 'map'\" (click)=\"openPurchase()\">PURCHASE</div>  \n    </div>\n    \n    <div class=\"body\">\n      <div class=\"details-content\">\n        <h2 class=\"details-title\">{{item.title}}</h2>\n        <div class=\"details-makers\" (click)=\"openDrawer(item)\">\n          <div class=\"makers-text\">\n            <div class=\"makers-label\">Makers:&nbsp;</div>\n            <div>{{makers | titlecase}}</div>\n          </div>\n          <mat-icon class=\"right\">chevron_right</mat-icon>\n        </div>\n        <div class=\"details-credit\">{{item.credit}}</div>\n\n        <!-- language bar only on maps -->\n        <div *ngIf=\"type === 'map'\" class=\"language-selection\">\n          <div>Languages:&nbsp;</div>\n          <div class=\"language-container\" *ngFor=\"let language of item.translations, index as i\">\n            <div *ngIf=\"i !== 0\">&nbsp;&nbsp;|&nbsp;&nbsp;</div>\n            <div class=\"language option\" [class.active]=\"selectedLanguage === language.abbr_short\"\n              (click)=\"languageSelect(language.abbr_short)\">{{language.native}}</div>\n          </div>\n        </div>\n\n        <p markdown [data]=\"item.description\" class=\"details-description\"></p>\n        <div class=\"details-references\">\n          <div>References</div>\n          <div class=\"reference\" *ngFor=\"let reference of item.references\">\n            <p markdown [data]=\"reference\"></p>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"details-image\" >\n        <div class=\"container\" [ngClass]=\"{'clickable': item.externalLink ? true : false}\" (click)=\"redirect(item.externalLink)\">\n          <img class=\"thumbnail\" [src]=\"item.thumbnail\" alt=\"item image\">\n          <div class=\"icon\" *ngIf=\"item.externalLink\">\n            <mat-icon *ngIf=\"type === 'map'\" class=\"zoom\">zoom_in</mat-icon>\n            <mat-icon *ngIf=\"type === 'macroscope'\" class=\"launch\">launch</mat-icon>\n          </div>\n        </div>\n      </div>\n\n      <h2 class=\"details-title mobile\">{{item.title}}</h2>\n    </div>\n  </div>\n</sci-drawer>","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MarkdownModule } from 'ngx-markdown';\nimport { SharedModule } from '../../shared.module';\nimport { DrawerHeaderModule } from '../drawer-header/drawer-header.module';\nimport { DrawerModule } from '../drawer/drawer.module';\nimport { PurchaseModalModule } from '../purchase-modal/purchase-modal.module';\nimport { ItemDrawerComponent } from './item-drawer.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    PurchaseModalModule,\n    MarkdownModule,\n    SharedModule,\n    DrawerModule,\n    DrawerHeaderModule\n  ],\n  declarations: [ItemDrawerComponent],\n  exports: [ItemDrawerComponent]\n})\nexport class ItemDrawerModule { }\n"],"sourceRoot":"webpack:///"}