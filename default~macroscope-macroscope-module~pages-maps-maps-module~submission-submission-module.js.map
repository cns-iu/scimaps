{"version":3,"sources":["./src/app/shared/components/item-drawer/item-drawer.component.ts","./src/app/shared/components/item-drawer/item-drawer.component.html","./src/app/shared/components/item-drawer/item-drawer.module.ts"],"names":[],"mappings":"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","file":"default~macroscope-macroscope-module~pages-maps-maps-module~submission-submission-module.js","sourcesContent":["import { Component, EventEmitter, HostBinding, Input, OnInit, Output } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { drawerInOut } from '../../../constants/drawer.animations';\nimport { MapMacroscopeItem } from '../../../core/models/discover-item';\nimport { PurchaseModalComponent } from '../purchase-modal/purchase-modal.component';\n\n/**\n * Drawer that opens when a map or macroscope item is selected\n */\n@Component({\n  selector: 'sci-item-drawer',\n  templateUrl: './item-drawer.component.html',\n  styleUrls: ['./item-drawer.component.scss'],\n  animations: [drawerInOut]\n})\nexport class ItemDrawerComponent implements OnInit {\n  /** HTML class name */\n  @HostBinding('class') readonly clsName = 'sci-item-drawer';\n\n  /**\n   * Type of item displayed\n   */\n  @Input() type!: 'map' | 'macroscope' | 'submission';\n\n  /**\n   * Item to be displayed in the drawer\n   */\n  @Input() item!: MapMacroscopeItem;\n\n  /**\n   * Emits the selected language when the language changes\n   */\n  @Output() languageChange = new EventEmitter<string>();\n\n  /**\n   * Currently selected language\n   */\n  selectedLanguage = 'en';\n  showDrawer = false;\n\n  makersDrawer = false;\n  constructor(private dialog: MatDialog, private router: Router, private route: ActivatedRoute) { }\n  ngOnInit(): void {\n    this.showDrawer = true;\n  }\n\n  /**\n   * Combines the maker names\n   */\n  get makers(): string {\n    return this.item.makers.map(maker => maker.name).join(', ');\n  }\n\n  /**\n   * Closes item drawer component and returns to the maps or macroscopes page\n   */\n  close(): void {\n    this.showDrawer = false;\n    setTimeout(() => {\n      this.router.navigate(['/', this.type + 's']);\n    }, 500);\n  }\n\n  /**\n   * Sets selectedLanguage to selected language and emits the new language\n   * @param language The language selected\n   */\n  languageSelect(language: string): void {\n    this.selectedLanguage = language;\n    this.languageChange.emit(language);\n  }\n\n  /**\n   * Opens purchase modal\n   */\n  openPurchase(): void {\n    this.dialog.open(PurchaseModalComponent, {\n      width: window.innerWidth <= 768 ? '100%' : '738px'\n    });\n  }\n\n  redirect(): void {\n    if (this.type === 'map') {\n      this.router.navigate(['detail'], {relativeTo: this.route});\n    }\n    else if (this.type === 'macroscope') {\n      const {videoLink, externalLink} = this.item;\n      if (videoLink) {\n        this.router.navigate(['detail'], {relativeTo: this.route});\n        return;\n      }\n      if (externalLink) {\n        window.open(externalLink, '_blank');\n      }\n    }\n  }\n}\n","<sci-drawer [@drawerInOut]=\"showDrawer ? 'show' : 'hide'\">\n  <div class=\"details-container\" drawer>\n    \n    <div class=\"header\">\n      <sci-drawer-header [backText]=\"'Iteration'\" (backClick)=\"close()\">\n      </sci-drawer-header>\n      <div class=\"purchase-button\" *ngIf=\"type === 'map'\" (click)=\"openPurchase()\">PURCHASE</div>  \n    </div>\n    \n    <div class=\"body\">\n      <div class=\"details-content\">\n        <h2 class=\"details-title\">{{item.title}}</h2>\n        <div class=\"details-makers\" (click)=\"makersDrawer = true\">\n          <div class=\"makers-text\">\n            <div class=\"makers-label\">Makers:&nbsp;</div>\n            <div>{{makers}}</div>\n          </div>\n          <mat-icon class=\"right\">chevron_right</mat-icon>\n        </div>\n        <div class=\"details-credit\">{{item.credit}}</div>\n\n        <!-- language bar only on maps -->\n        <div *ngIf=\"type === 'map'\" class=\"language-selection\">\n          <div>Languages:&nbsp;</div>\n          <div class=\"language-container\" *ngFor=\"let language of item.translations, index as i\">\n            <div *ngIf=\"i !== 0\">&nbsp;&nbsp;|&nbsp;&nbsp;</div>\n            <div class=\"language option\" [class.active]=\"selectedLanguage === language.abbr_short\"\n              (click)=\"languageSelect(language.abbr_short)\">{{language.native}}</div>\n          </div>\n        </div>\n\n        <p markdown [data]=\"item.description\" class=\"details-description\"></p>\n        <div class=\"details-references\">\n          <div>References</div>\n          <div class=\"reference\" *ngFor=\"let reference of item.references\">\n            <p markdown [data]=\"reference\"></p>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"details-image\">\n        <div class=\"container\" [ngClass]=\"{'clickable': item.externalLink || item.videoLink ? true : false}\" (click)=\"redirect()\">\n          <!-- Image -->\n          <img class=\"thumbnail\" [src]=\"item.thumbnail\" alt=\"item image\">\n          <div class=\"icon\" *ngIf=\"item.externalLink\">\n            <mat-icon *ngIf=\"type === 'map'\" class=\"zoom\">zoom_in</mat-icon>\n            <mat-icon *ngIf=\"type === 'macroscope'\" class=\"launch\">launch</mat-icon>\n          </div>\n          <div class=\"icon\" *ngIf=\"item.videoLink\">\n            <mat-icon *ngIf=\"type === 'macroscope'\" class=\"video\">smart_display</mat-icon>\n          </div>\n        </div>\n      </div>\n\n      <h2 class=\"details-title mobile\">{{item.title}}</h2>\n    </div>\n    <!-- Makers drawer -->\n    <sci-drawer [@drawerInOut] *ngIf=\"makersDrawer\">\n      <div drawer>\n        <sci-makers-subdrawer [makers]=\"item.makers\" [title]=\"item.title\" (closed)=\"makersDrawer = false\">\n        </sci-makers-subdrawer>\n      </div>\n    </sci-drawer>\n\n    <ng-content [select]=\"detail\">\n    </ng-content>\n  </div>\n</sci-drawer>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { RouterModule } from '@angular/router';\nimport { MarkdownModule } from 'ngx-markdown';\nimport { SharedModule } from '../../shared.module';\nimport { DrawerHeaderModule } from '../drawer-header/drawer-header.module';\nimport { DrawerModule } from '../drawer/drawer.module';\nimport { MakersSubdrawerModule } from '../makers-subdrawer/makers-subdrawer.module';\nimport { PurchaseModalModule } from '../purchase-modal/purchase-modal.module';\nimport { ItemDrawerComponent } from './item-drawer.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MatIconModule,\n    PurchaseModalModule,\n    MarkdownModule,\n    SharedModule,\n    DrawerModule,\n    DrawerHeaderModule,\n    MakersSubdrawerModule,\n    RouterModule\n  ],\n  declarations: [ItemDrawerComponent],\n  exports: [ItemDrawerComponent]\n})\nexport class ItemDrawerModule { }\n"],"sourceRoot":"webpack:///"}